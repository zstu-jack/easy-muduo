- make socket buffer configurable
- add "highwater" callback(write buffer full or use majority)

- FIX ME
    - callback weakptr.